let socket=io("https://testleonid.herokuapp.com/"),peer=new Peer({config:{iceServers:[{url:"stun:eu-turn1.xirsys.com",username:"3be6db1a-495e-11e9-8859-8741069e5961",credential:"3be6db88-495e-11e9-aef3-1b4a17b9ce1b"},{url:"turn:eu-turn1.xirsys.com:3478?transport=udp",username:"3be6db1a-495e-11e9-8859-8741069e5961",credential:"3be6db88-495e-11e9-aef3-1b4a17b9ce1b"}]}});function openStream(){return navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{exact:1280},height:{exact:720}}})}function playStream(e,t){const r=document.getElementById(e);r.srcObject=t,r.controls=!1,r.play()}openStream().then(e=>{playStream("localStream",e)}),socket.on("Chao",function(e){}),socket.on("IDVideo_Of_Friend",function(e){openStream().then(t=>{peer.call(e.IDVideo,t).on("stream",e=>{playStream("remoteStream",e)})})}),peer.on("open",e=>socket.emit("IDVideo",{IDVideo:e})),peer.on("call",e=>{openStream().then(t=>{e.answer(t),e.on("stream",e=>{playStream("remoteStream",e)})}).catch(e=>alert(e))});